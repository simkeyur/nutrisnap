<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriSnap - AI Nutrition Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Hide the ugly file input */
        #file-input {
            display: none;
        }
        /* Custom styles for the camera view and buttons */
        #camera-view video {
            width: 100%;
            max-width: 100vw;
            height: auto;
            border-radius: 1.5rem; /* rounded-3xl */
        }
        #capture-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 5px solid white;
            background-color: rgba(255, 255, 255, 0.3);
            transition: background-color 0.2s;
        }
        #capture-btn:active {
            background-color: rgba(255, 255, 255, 0.6);
        }
        /* Chat bubble styles */
        .chat-bubble {
            max-width: 80%;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-900">NutriSnap üì∏</h1>
        </header>

        <main id="app-container" class="bg-white p-6 md:p-8 rounded-3xl shadow-lg transition-all duration-300">

            <!-- Initial View -->
            <div id="home-view">
                <h2 class="text-2xl font-bold text-center text-gray-700 mb-2">Analyze Your Meal in a Snap!</h2>
                
                <div id="api-key-group">
                    <p class="text-center text-gray-500 mb-6">Enter your Gemini API Key to get started.</p>
                    <div class="flex items-center gap-2 mb-4">
                        <input type="password" id="api-key-input" placeholder="Enter Your Gemini API Key" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                        <button id="save-key-btn" class="px-4 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition whitespace-nowrap">Save Key</button>
                    </div>
                </div>

                <div id="model-selection-group" class="hidden">
                     <p class="text-center text-gray-500 mb-4">Choose your analysis model.</p>
                     <div class="flex items-center gap-2 mb-4">
                        <select id="model-select" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition appearance-none bg-white bg-no-repeat bg-right pr-8" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22%23a0aec0%22%3E%3Cpath%20d%3D%22M9.293%2012.95l.707.707L15.657%208l-1.414-1.414L10%2010.828%205.757%206.586%204.343%208z%22/%3E%3C/svg%3E');">
                            <option value="gemini-2.5-flash">Gemini Flash (Fast & Efficient)</option>
                            <option value="gemini-2.5-pro">Gemini Pro (Advanced)</option>
                            <option value="gemini-2.5-flash-image-preview">Image Preview (Image Specific BETA)</option>
                        </select>
                        <button id="change-key-btn" class="px-4 py-3 bg-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition whitespace-nowrap">Change Key</button>
                     </div>
                </div>


                <button id="scan-btn" class="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-3 hover:from-green-500 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:from-gray-400 disabled:to-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-camera"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                    Scan Your Meal
                </button>
                 <label for="file-input" id="upload-btn" class="mt-4 w-full bg-gray-600 text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-3 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-upload"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                    Or Upload Image
                </label>
                <input type="file" id="file-input" accept="image/*">
            </div>

            <!-- Loading View -->
            <div id="loading-view" class="hidden text-center py-8">
                <div id="emoji-spinner" class="text-6xl mb-6">üçé</div>
                <p class="text-xl font-semibold text-gray-700 animate-pulse">Analyzing your delicious meal... üßë‚Äçüç≥</p>
            </div>

            <!-- Results View -->
            <div id="results-view" class="hidden">
                <img id="result-image" src="" alt="Captured meal" class="w-full h-48 object-cover rounded-2xl mb-6 shadow-md">
                <div class="text-center mb-6">
                    <p class="text-gray-600 text-lg">Estimated Calories</p>
                    <p id="calories" class="text-5xl md:text-6xl font-extrabold text-gray-900">~0 üî•</p>
                </div>

                <div class="grid grid-cols-3 gap-3 text-center mb-6">
                    <div class="bg-blue-100 text-blue-800 p-3 rounded-xl">
                        <div class="text-3xl">üí™</div>
                        <div class="font-bold">Protein</div>
                        <div id="protein" class="font-mono">~0g</div>
                    </div>
                    <div class="bg-yellow-100 text-yellow-800 p-3 rounded-xl">
                        <div class="text-3xl">üçû</div>
                        <div class="font-bold">Carbs</div>
                        <div id="carbs" class="font-mono">~0g</div>
                    </div>
                    <div class="bg-green-100 text-green-800 p-3 rounded-xl">
                        <div class="text-3xl">ü•ë</div>
                        <div class="font-bold">Fat</div>
                        <div id="fat" class="font-mono">~0g</div>
                    </div>
                </div>

                <blockquote class="bg-gray-100 border-l-4 border-blue-500 p-4 rounded-r-lg mb-6">
                    <p id="summary" class="text-gray-700 italic">"Looks delicious!"</p>
                </blockquote>

                <!-- Chat Interface -->
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-lg font-bold text-center text-gray-800 mb-4">Have a Question?</h3>
                    <div id="chat-log" class="flex flex-col space-y-3 mb-4 h-48 overflow-y-auto p-3 bg-gray-50 rounded-lg border">
                        <!-- Chat messages will be appended here -->
                    </div>
                    <form id="chat-form" class="flex items-center gap-2">
                        <input type="text" id="chat-input" placeholder="e.g., Is this healthy?" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition" required>
                        <button type="submit" id="send-btn" class="p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition flex-shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </form>
                </div>

                <button id="scan-another-btn" class="mt-6 w-full bg-gray-700 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition">Scan Another Meal</button>
            </div>
        </main>
    </div>

    <!-- Camera View Modal -->
    <div id="camera-view" class="hidden fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4 z-50">
        <video id="video-feed" playsinline autoplay class="mb-4"></video>
        <canvas id="canvas" class="hidden"></canvas>
        <div class="flex items-center gap-8">
            <button id="cancel-camera-btn" class="text-white font-semibold text-lg bg-gray-700 px-6 py-3 rounded-full">Cancel</button>
            <button id="capture-btn" title="Capture Image"></button>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
        <div class="bg-white p-8 rounded-2xl shadow-xl text-center max-w-sm w-full">
            <p id="error-message" class="text-lg font-medium text-gray-800 mb-6">Oops! üò• Something went wrong.</p>
            <button id="close-error-btn" class="bg-red-500 text-white font-bold py-2 px-8 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition">Close</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const homeView = document.getElementById('home-view');
            const loadingView = document.getElementById('loading-view');
            const resultsView = document.getElementById('results-view');
            const cameraView = document.getElementById('camera-view');
            const errorModal = document.getElementById('error-modal');
            
            const apiKeyInput = document.getElementById('api-key-input');
            const saveKeyBtn = document.getElementById('save-key-btn');
            const scanBtn = document.getElementById('scan-btn');
            const uploadBtn = document.getElementById('upload-btn');
            const fileInput = document.getElementById('file-input');

            const videoFeed = document.getElementById('video-feed');
            const canvas = document.getElementById('canvas');
            const captureBtn = document.getElementById('capture-btn');
            const cancelCameraBtn = document.getElementById('cancel-camera-btn');
            
            const scanAnotherBtn = document.getElementById('scan-another-btn');
            const errorMessage = document.getElementById('error-message');
            const closeErrorBtn = document.getElementById('close-error-btn');

            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatLog = document.getElementById('chat-log');
            
            const apiKeyGroup = document.getElementById('api-key-group');
            const modelSelectionGroup = document.getElementById('model-selection-group');
            const modelSelect = document.getElementById('model-select');
            const changeKeyBtn = document.getElementById('change-key-btn');

            // --- State ---
            let apiKey = '';
            let mediaStream = null;
            let emojiInterval = null;
            let apiChatContext = [];
            let selectedModel = 'gemini-2.5-flash';

            // --- API & System Prompt ---
            const API_BASE_URL = `https://generativelanguage.googleapis.com/v1beta/models/`;
            const IMAGE_ANALYSIS_PROMPT = `You are NutriSnap, a helpful and friendly nutrition assistant.
When you receive an image for the first time in a conversation, your task is to analyze the food in it. Provide the estimated total calories and a breakdown of macronutrients (protein, carbohydrates, fat) in grams. Also, provide a brief, encouraging, and positive one-sentence summary about the meal. Respond ONLY in a valid JSON format with the following structure: { "calories": number, "protein": number, "carbs": number, "fat": number, "summary": "string" }. If the image does not contain any food, respond with { "error": "Not food" }.`;
            const CHAT_PROMPT = `You are NutriSnap, a helpful nutrition assistant. You have already provided the user with a nutritional analysis of their meal. Now, answer their follow-up questions in a conversational and helpful way, based on the nutritional context provided in the conversation history.`;


            // --- UI View Management ---
            const showView = (view) => {
                homeView.classList.add('hidden');
                loadingView.classList.add('hidden');
                resultsView.classList.add('hidden');
                view.classList.remove('hidden');
            };

            const showToast = (message, isError = false) => {
                const toast = document.createElement('div');
                toast.textContent = message;
                const bgColor = isError ? 'bg-red-500' : 'bg-green-600';
                toast.className = `fixed bottom-5 right-5 ${bgColor} text-white px-5 py-3 rounded-xl shadow-lg transition-opacity duration-300 z-50`;
                document.body.appendChild(toast);
                setTimeout(() => {
                    toast.style.opacity = '0';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            };

            // --- API Key Management ---
            const loadApiKey = () => {
                const storedKey = localStorage.getItem('geminiApiKey');
                if (storedKey) {
                    apiKey = storedKey;
                    apiKeyInput.value = storedKey;
                    scanBtn.disabled = false;
                    uploadBtn.disabled = false;
                    apiKeyGroup.classList.add('hidden');
                    modelSelectionGroup.classList.remove('hidden');
                } else {
                    scanBtn.disabled = true;
                    uploadBtn.disabled = true;
                    apiKeyGroup.classList.remove('hidden');
                    modelSelectionGroup.classList.add('hidden');
                }
            };

            const saveApiKey = () => {
                const key = apiKeyInput.value.trim();
                if (key) {
                    apiKey = key;
                    localStorage.setItem('geminiApiKey', key);
                    loadApiKey(); // Refresh UI
                    showToast('API Key saved successfully!');
                } else {
                    showError('Please enter a valid API key.');
                }
            };

            const changeApiKey = () => {
                apiKeyGroup.classList.remove('hidden');
                modelSelectionGroup.classList.add('hidden');
            };

            // --- Camera Functionality ---
            const startCamera = async () => {
                try {
                    mediaStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                    videoFeed.srcObject = mediaStream;
                    cameraView.classList.remove('hidden');
                } catch (err) {
                    console.error("Camera error:", err);
                    showError("Could not access camera. Please check permissions.");
                }
            };

            const stopCamera = () => {
                if (mediaStream) {
                    mediaStream.getTracks().forEach(track => track.stop());
                }
                cameraView.classList.add('hidden');
            };

            const captureImage = () => {
                const context = canvas.getContext('2d');
                canvas.width = videoFeed.videoWidth;
                canvas.height = videoFeed.videoHeight;
                context.drawImage(videoFeed, 0, 0, canvas.width, canvas.height);
                const base64Image = canvas.toDataURL('image/jpeg');
                stopCamera();
                analyzeImage(base64Image);
            };

            // --- Image Upload Functionality ---
            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => analyzeImage(e.target.result);
                    reader.readAsDataURL(file);
                }
            };
            
            // --- Loading Animation ---
            const startLoadingAnimation = () => {
                const emojis = ['üçé', 'ü•ï', 'ü•¶', 'üçó', 'üç£', 'üçï', 'ü•ó'];
                let index = 0;
                const emojiSpinner = document.getElementById('emoji-spinner');
                emojiInterval = setInterval(() => {
                    index = (index + 1) % emojis.length;
                    emojiSpinner.textContent = emojis[index];
                }, 300);
            };

            const stopLoadingAnimation = () => {
                if (emojiInterval) clearInterval(emojiInterval);
                emojiInterval = null;
            };

            // --- API Call & Data Handling with Retry ---
            const fetchWithRetry = async (url, options, maxRetries = 4) => {
                let lastError;
                for (let i = 0; i < maxRetries; i++) {
                    try {
                        const response = await fetch(url, options);
                        if (response.ok) {
                            return response;
                        }
                        if (response.status === 503 || response.status === 429) {
                           console.warn(`Attempt ${i + 1} failed with status: ${response.status}. Retrying...`);
                           lastError = new Error(`API returned status ${response.status}`);
                        } else {
                           const errorData = await response.json().catch(() => ({}));
                           lastError = new Error(errorData.error?.message || `API returned status ${response.status}`);
                           break; 
                        }
                    } catch (error) {
                        lastError = error;
                        console.warn(`Attempt ${i + 1} failed with network error:`, error);
                    }
                    if (i < maxRetries - 1) {
                        const jitter = Math.random() * 1000;
                        const delay = 1000 * Math.pow(2, i) + jitter;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }
                throw lastError;
            };
            
            const analyzeImage = async (base64Image) => {
                showView(loadingView);
                startLoadingAnimation();
                
                const imageData = base64Image.split(',')[1];
                const userTurn = {
                    role: 'user',
                    parts: [{
                        inlineData: { mimeType: "image/jpeg", data: imageData }
                    }]
                };

                try {
                    const payload = {
                        contents: [userTurn],
                        systemInstruction: { parts: [{ text: IMAGE_ANALYSIS_PROMPT }] },
                    };

                    const response = await fetchWithRetry(`${API_BASE_URL}${selectedModel}:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(errorData.error?.message || `API request failed with status ${response.status}`);
                    }
                    
                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    if (!candidate || !candidate.content?.parts?.[0]?.text) {
                        throw new Error('Invalid response structure from API.');
                    }
                    
                    let responseText = candidate.content.parts[0].text;
                    if (responseText.startsWith("```json")) {
                        responseText = responseText.substring(responseText.indexOf('{'), responseText.lastIndexOf('}') + 1);
                    }
                    
                    const nutritionalData = JSON.parse(responseText);

                    if (nutritionalData.error && nutritionalData.error === "Not food") {
                        showError("Hmm... ü§î That doesn't look like food. Try again.");
                        showView(homeView);
                    } else {
                        // Initialize the chat context for the API
                        apiChatContext = [
                            {
                                role: 'user',
                                parts: [{ text: `Here is the nutritional context for my meal: Calories: ~${nutritionalData.calories}, Protein: ~${nutritionalData.protein}g, Carbs: ~${nutritionalData.carbs}g, Fat: ~${nutritionalData.fat}g. Summary: "${nutritionalData.summary}"` }]
                            },
                            {
                                role: 'model',
                                parts: [{ text: "Great, I have the context of your meal. How can I help you further?" }]
                            }
                        ];
                        displayResults(nutritionalData, base64Image);
                    }
                } catch (error) {
                    console.error('Analysis Error:', error);
                    if (error.message && error.message.includes('503')) {
                        showError(`The analysis service is temporarily unavailable. Please try again in a few moments. üò©`);
                    } else {
                        showError(`Oops! üò• Something went wrong. Check your API key or try again.`);
                    }
                    showView(homeView);
                } finally {
                    stopLoadingAnimation();
                }
            };

            // --- UI Updates ---
            const displayResults = (data, imageSrc) => {
                document.getElementById('result-image').src = imageSrc;
                document.getElementById('calories').innerHTML = `~${data.calories} <span class="text-3xl">üî•</span>`;
                document.getElementById('protein').textContent = `~${data.protein}g`;
                document.getElementById('carbs').textContent = `~${data.carbs}g`;
                document.getElementById('fat').textContent = `~${data.fat}g`;
                document.getElementById('summary').textContent = `"${data.summary}"`;
                chatLog.innerHTML = '';
                showView(resultsView);
            };

            const resetUI = () => {
                apiChatContext = [];
                showView(homeView);
            };

            const showError = (message) => {
                errorMessage.textContent = message;
                errorModal.classList.remove('hidden');
            };

            // --- Chat Functionality ---
            const appendMessageToChatLog = (text, role, isLoading = false) => {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('p-3', 'rounded-xl', 'chat-bubble');

                if (role === 'user') {
                    messageDiv.classList.add('bg-blue-500', 'text-white', 'self-end', 'ml-auto');
                    messageDiv.textContent = text;
                } else {
                    messageDiv.classList.add('bg-gray-200', 'text-gray-800', 'self-start', 'mr-auto');
                    if (isLoading) {
                        messageDiv.innerHTML = `<div class="flex items-center justify-center gap-1.5"><div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce"></div><div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div><div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div></div>`;
                    } else {
                        messageDiv.textContent = text;
                    }
                }
                chatLog.appendChild(messageDiv);
                chatLog.scrollTop = chatLog.scrollHeight;
                return messageDiv;
            };

            const handleChatSubmit = async (event) => {
                event.preventDefault();
                const userMessage = chatInput.value.trim();
                if (!userMessage) return;

                appendMessageToChatLog(userMessage, 'user');
                chatInput.value = '';

                const userTurn = { role: 'user', parts: [{ text: userMessage }] };
                apiChatContext.push(userTurn);
                const loadingIndicator = appendMessageToChatLog('', 'model', true);

                try {
                    const payload = {
                        contents: apiChatContext, // Use the running context directly
                        systemInstruction: { parts: [{ text: CHAT_PROMPT }] },
                    };
                    const response = await fetchWithRetry(`${API_BASE_URL}${selectedModel}:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                         const errorData = await response.json().catch(() => ({}));
                        throw new Error(errorData.error?.message || `API request failed with status ${response.status}`);
                    }

                    const result = await response.json();
                    const modelResponse = result.candidates?.[0]?.content;
                    if (!modelResponse) throw new Error('Invalid response structure.');
                    
                    apiChatContext.push(modelResponse); // Add model's response to the context
                    loadingIndicator.remove();
                    appendMessageToChatLog(modelResponse.parts[0].text, 'model');
                } catch (error) {
                    console.error('Follow-up error:', error);
                    loadingIndicator.remove();
                    if (error.message && error.message.includes('503')) {
                        appendMessageToChatLog('The service is currently busy. Please try asking again in a moment.', 'model');
                    } else {
                        appendMessageToChatLog('Sorry, I had trouble responding. Please try again.', 'model');
                    }
                    apiChatContext.pop(); // On error, remove the user's last message to keep state consistent
                }
            };

            // --- Event Listeners ---
            saveKeyBtn.addEventListener('click', saveApiKey);
            changeKeyBtn.addEventListener('click', changeApiKey);
            modelSelect.addEventListener('change', (e) => {
                selectedModel = e.target.value;
            });
            scanBtn.addEventListener('click', startCamera);
            fileInput.addEventListener('change', handleImageUpload);
            cancelCameraBtn.addEventListener('click', stopCamera);
            captureBtn.addEventListener('click', captureImage);
            scanAnotherBtn.addEventListener('click', resetUI);
            chatForm.addEventListener('submit', handleChatSubmit);
            closeErrorBtn.addEventListener('click', () => errorModal.classList.add('hidden'));

            // --- Initial Load ---
            loadApiKey();
        });
    </script>
</body>
</html>

